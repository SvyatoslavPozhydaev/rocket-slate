{"version":3,"sources":["../src/index.tsx"],"names":["attributes","children","element","url","withLinks","editor","insertData","insertText","isInline","type","text","wrapLink","data","getData","insertLink","selection","isLinkActive","link","Editor","nodes","match","n","unwrapLink","Transforms","unwrapNodes","isCollapsed","Range","insertNodes","wrapNodes","split","collapse","edge"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport { addElement } from \"rocket-slate\"\naddElement(\"link\", \"link\", ({attributes, children, element}) => <a {...attributes} href={element.url}>{children}</a>)\n\nimport isUrl from 'is-url'\nimport { Transforms, Editor, Range } from 'slate'\n\nconst withLinks = editor => {\n  const { insertData, insertText, isInline } = editor\n\n  editor.isInline = element => {\n    return element.type === 'link' ? true : isInline(element)\n  }\n\n  editor.insertText = text => {\n    if (text && isUrl(text)) {\n      wrapLink(editor, text)\n    } else {\n      insertText(text)\n    }\n  }\n\n  editor.insertData = data => {\n    const text = data.getData('text/plain')\n\n    if (text && isUrl(text)) {\n      wrapLink(editor, text)\n    } else {\n      insertData(data)\n    }\n  }\n\n  return editor\n}\n\nconst insertLink = (editor, url) => {\n  if (editor.selection) {\n    wrapLink(editor, url)\n  }\n}\n\nconst isLinkActive = editor => {\n  const [link] = Editor.nodes(editor, { match: n => n.type === 'link' })\n  return !!link\n}\n\nconst unwrapLink = editor => {\n  Transforms.unwrapNodes(editor, { match: n => n.type === 'link' })\n}\n\nconst wrapLink = (editor, url) => {\n  if (isLinkActive(editor)) {\n    unwrapLink(editor)\n  }\n\n  const { selection } = editor\n  const isCollapsed = selection && Range.isCollapsed(selection)\n  const link = {\n    type: 'link',\n    url,\n    children: isCollapsed ? [{ text: url }] : [],\n  }\n\n  if (isCollapsed) {\n    Transforms.insertNodes(editor, link)\n  } else {\n    Transforms.wrapNodes(editor, link, { split: true })\n    Transforms.collapse(editor, { edge: 'end' })\n  }\n}\n\n"],"file":"index.js"}