{"version":3,"sources":["../src/index.tsx"],"names":["withLinks","editor","insertData","insertText","isInline","element","type","text","wrapLink","data","getData","insertLink","url","selection","isLinkActive","link","Editor","nodes","match","n","unwrapLink","Transforms","unwrapNodes","isCollapsed","Range","children","insertNodes","wrapNodes","split","collapse","edge","addElement","attributes"],"mappings":"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","sourcesContent":["import React from 'react'\nimport isUrl from 'is-url'\nimport { Transforms, Editor, Range } from 'slate'\n\nconst withLinks = editor => {\n  const { insertData, insertText, isInline } = editor\n\n  editor.isInline = element => {\n    return element.type === 'link' ? true : isInline(element)\n  }\n\n  editor.insertText = text => {\n    if (text && isUrl(text)) {\n      wrapLink(editor, text)\n    } else {\n      insertText(text)\n    }\n  }\n\n  editor.insertData = data => {\n    const text = data.getData('text/plain')\n\n    if (text && isUrl(text)) {\n      wrapLink(editor, text)\n    } else {\n      insertData(data)\n    }\n  }\n\n  return editor\n}\n\nconst insertLink = (editor, url) => {\n  if (editor.selection) {\n    wrapLink(editor, url)\n  }\n}\n\nconst isLinkActive = editor => {\n  const [link] = Editor.nodes(editor, { match: n => n.type === 'link' })\n  return !!link\n}\n\nconst unwrapLink = editor => {\n  Transforms.unwrapNodes(editor, { match: n => n.type === 'link' })\n}\n\nconst wrapLink = (editor, url) => {\n  if (isLinkActive(editor)) {\n    unwrapLink(editor)\n  }\n\n  const { selection } = editor\n  const isCollapsed = selection && Range.isCollapsed(selection)\n  const link = {\n    type: 'link',\n    url,\n    children: isCollapsed ? [{ text: url }] : [],\n  }\n\n  if (isCollapsed) {\n    Transforms.insertNodes(editor, link)\n  } else {\n    Transforms.wrapNodes(editor, link, { split: true })\n    Transforms.collapse(editor, { edge: 'end' })\n  }\n}\n\naddElement(\"link\", \"link\", ({attributes, children, element}) => <a {...attributes} href={element.url}>{children}</a>)"],"file":"index.js"}